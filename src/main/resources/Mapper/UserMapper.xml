<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.dao.UserMapper">

    <resultMap id="BaseResultMap" type="com.example.entity.SmbmsUser">
        <id column="id" property="id" />
        <result column="userCode" property="userCode" />
        <result column="userName" property="userName" />
        <result column="userPassword" property="userPassword" />
        <result column="gender" property="gender" />
        <result column="birthday" property="birthday" />
        <result column="phone" property="phone" />
        <result column="address" property="address" />
        <result column="userRole" property="userRole" />
        <result column="createdBy" property="createdBy" />
        <result column="creationDate" property="creationDate" />
        <result column="modifyBy" property="modifyBy" />
        <result column="modifyDate" property="modifyDate" />
    </resultMap>

    <select id="selectById" parameterType="Long" resultMap="BaseResultMap">
        SELECT * FROM smbms_user WHERE id = #{id}
    </select>

    <select id="selectAll" resultMap="BaseResultMap">
        SELECT * FROM smbms_user
    </select>

    <insert id="insert" parameterType="com.example.entity.SmbmsUser"
            useGeneratedKeys="true" keyProperty="id">
        INSERT INTO smbms_user (userCode, userName, userPassword, gender,
                               birthday, phone, address, userRole)
        VALUES (#{userCode}, #{userName}, #{userPassword}, #{gender},
                #{birthday}, #{phone}, #{address}, #{userRole})
    </insert>

    <update id="update" parameterType="com.example.entity.SmbmsUser">
        UPDATE smbms_user SET
            userCode = #{userCode},
            userName = #{userName},
            userPassword = #{userPassword},
            gender = #{gender},
            birthday = #{birthday},
            phone = #{phone},
            address = #{address},
            userRole = #{userRole}
        WHERE id = #{id}
    </update>

    <delete id="deleteById" parameterType="Long">
        DELETE FROM smbms_user WHERE id = #{id}
    </delete>

    <select id="login" resultMap="BaseResultMap">
        SELECT * FROM smbms_user
        WHERE userCode = #{userCode} AND userPassword = #{userPassword}
    </select>
</mapper>